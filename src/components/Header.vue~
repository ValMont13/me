<template>
  <header>
    <nav id="menu">
      <ul v-if="show">
        <li class="menu-item" v-for="item in menu" @click="scrollTo" :data-link="item.link">
          <a class="title" :data-link="item.link">{{ item.title }}</a>
        </li>
      </ul>
    </nav>
  </header>
</template>

<script>
  import VueScrollTo from 'vue-scrollto'

  export default {
    name: 'header',
    data () {
      return {
        menu: [
          { title: 'Qui suis-je ?', link: '#me' },
          { title: 'Mes Compétences', link: '#competences' },
          { title: 'Mes Réalisations', link: '#realisations' }
        ],
        show: window.innerWidth > 400
      }
    },
    created: function () {
      window.addEventListener('resize', this.handleResize)
    },
    beforeDestroy: function () {
      window.removeEventListener('resize', this.handleResize)
    },
    methods: {
      handleResize (event) {
        this.show = window.innerWidth > 400
        if (this.show) {
          document.getElementById('menu').classList.remove('hide')
          document.getElementById('menu').classList.add('active')
        } else {
          document.getElementById('menu').classList.remove('active')
          document.getElementById('menu').classList.add('hide')
        }
      },
      scrollTo (event) {
        VueScrollTo.scrollTo(event.target.getAttribute('data-link'))
      }
    }
  }
</script>

<style lang="scss">
  @import url('https://fonts.googleapis.com/css?family=Amatic+SC');

  #menu {
    background-color: #5fcb5fb3;
    box-shadow: 0 0 2px 0 gray;
    font-family: 'Amatic SC', cursive;
  }

  ul {
    padding: 0;
    margin : 0;
  }

  .menu-item:hover {
    background-color: #71ed71b3;
    transform: skew(-15deg);
    box-shadow: 0 -2px 3px 0 black;
  }

  .menu-item {
    list-style: none;
    display: inline-block;
    width: 25%;
    padding: 2%;
    transition: all 0.4s ease;
  }

  .menu-item:hover .title {
    transform: skew(15deg);
  }

  .title {
    color: white;
    font-size: 34px;
    font-weight: 700;
    transition: all 0.4s ease;
  }

  /* Responsive */

  @media only screen and (max-width: 767px)
  {
    .title {
      font-size: 28px;
    }
  }

</style>
